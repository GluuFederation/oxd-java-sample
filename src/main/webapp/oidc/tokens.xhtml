<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" template="template.xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:param name="stage" value="TOKEN_REQUEST, TOKEN_RESPONSE" />

    <ui:define name="main_content">

        <c:set var="step" value="#{flow.stage.step}" />

        <c:choose>
            <c:when test="#{empty param.error}">

                <div class="well">
                    <p>
                        You have gone through steps 1 - #{step-1}.
                    </p>
                </div>

                <ui:include src="tokens_inner.xhtml" />

            </c:when>
            <c:otherwise>
                <div class="lead bg-warning" align="center" style="padding:15px">
                    There was an error processing this step at the authorization server.
                </div>

                <p>These are some details:</p>

                <p>
                    <i>error:</i> #{param.error}<br />
                    <i>description:</i> #{param.error_description}
                </p>

            </c:otherwise>
        </c:choose>

    </ui:define>

</ui:composition>